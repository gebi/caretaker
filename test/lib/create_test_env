## vim:ft=zsh
# ct_new_test_env
# Create/Switch Testing environment

function ct_new_test_env {
	[[ -n $test_pdir && -e $test_pdir ]] && rm -rf $test_pdir $test_proot $test_home

	test_pdir=$(mktemp -dt pkgdir.XXXXXX)
	test_proot=$(mktemp -dt pkgroot.XXXXXX)
	test_home=$(mktemp -dt pkghome.XXXXXX)

cat << meow

Current test directories:
	PKG_DIR = $test_pdir
	PKG_ROOT = $test_proot
	HOME = $test_home
meow

	cd $test_home
	export HOME=$test_home

	ct_setup_root 1 $test_proot
	$test_proot/caretaker/include/bootstrap $test_proot $test_pdir > /dev/null
}
